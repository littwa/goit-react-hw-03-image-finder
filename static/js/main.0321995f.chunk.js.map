{"version":3,"sources":["components/Searchbar/Searchbar.js","components/FetchImages/FetchImages.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Button/Button.js","components/Modal/Modal.js","components/App.js","index.js"],"names":["Searchbar","state","inputValue","agreed","handleChange","e","persist","setState","target","value","handleSubmit","preventDefault","props","forSubmitSearchbar","handleCheckbox","checked","onInfiniteScroll","className","onSubmit","this","style","width","fontSize","color","type","onChange","autoComplete","autoFocus","placeholder","React","Component","FetchImages","q","page","pageAmount","fetch","then","resp","json","ImageGalleryItem","webformatURL","largeImageURL","modal","onClick","src","alt","defaultProps","ImageGallery","images","console","log","map","el","key","id","Button","handleClick","fetchImgAPI","Modal","closeCallback","closeModal","window","addEventListener","removeEventListener","nodeName","large","App","openModal","loading","error","InfiniteScroll","query","pageNumbear","largeImageForModal","undefined","options","rootMargin","threshold","onEntry","entries","observer","forEach","entry","isIntersecting","IntersectionObserver","data","arrImg","hits","prevState","catch","finally","openModalToggle","prevProps","document","documentElement","scrollHeight","snapshot","specDiv","querySelector","observe","length","scrollTo","top","behavior","height","clientWidth","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.0321995f.chunk.js","sourcesContent":["import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nclass Searchbar extends React.Component {\r\n static propTypes = {\r\n  forSubmitSearchbar: PropTypes.func.isRequired,\r\n  onInfiniteScroll: PropTypes.func.isRequired\r\n };\r\n\r\n state = {\r\n  inputValue: \"\",\r\n  agreed: true\r\n };\r\n handleChange = e => {\r\n  e.persist();\r\n  this.setState({ inputValue: e.target.value });\r\n };\r\n handleSubmit = e => {\r\n  e.preventDefault();\r\n\r\n  this.props.forSubmitSearchbar(this.state.inputValue);\r\n };\r\n handleCheckbox = e => {\r\n  this.setState({ agreed: e.target.checked });\r\n  this.props.onInfiniteScroll(e.target.checked);\r\n };\r\n render() {\r\n  return (\r\n   <header className=\"Searchbar\">\r\n    <form onSubmit={this.handleSubmit} className=\"SearchForm\">\r\n     <label style={{ width: 160, fontSize: 16, color: \"#000\" }}>\r\n      <input type=\"checkbox\" checked={this.state.agreed} onChange={this.handleCheckbox} />\r\n      Infinite Scroll\r\n     </label>\r\n\r\n     <button type=\"submit\" className=\"SearchForm-button\">\r\n      <span className=\"SearchForm-button-label\">Search</span>\r\n     </button>\r\n\r\n     <input\r\n      onChange={this.handleChange}\r\n      value={this.state.inputValue}\r\n      className=\"SearchForm-input\"\r\n      type=\"text\"\r\n      autoComplete=\"off\"\r\n      autoFocus\r\n      placeholder=\"Search images and photos\"\r\n     />\r\n    </form>\r\n   </header>\r\n  );\r\n }\r\n}\r\n\r\nexport default Searchbar;\r\n","const FetchImages = (q, page, pageAmount) => {\r\n return fetch(\r\n  `https://pixabay.com/api/?key=16717692-bb141906bc5c82eed9886cf8d&q=${q}&page=${page}&image_type=photo&orientation=horizontal&per_page=${pageAmount}`\r\n ).then(resp => resp.json());\r\n};\r\n\r\nexport default FetchImages;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst ImageGalleryItem = ({ webformatURL, largeImageURL, modal }) => {\r\n return (\r\n  <li\r\n   onClick={() => {\r\n    modal(largeImageURL);\r\n   }}\r\n   className=\"ImageGalleryItem\"\r\n  >\r\n   <img src={webformatURL} alt=\"pic\" className=\"ImageGalleryItem-image\" />\r\n  </li>\r\n );\r\n};\r\n\r\nImageGalleryItem.propTypes = {\r\n webformatURL: PropTypes.string,\r\n largeImageURL: PropTypes.string,\r\n modal: PropTypes.func\r\n};\r\n\r\nImageGalleryItem.defaultProps = {\r\n webformatURL: \"https://dummyimage.com/640x480/2a2a2a/ffffff&text=Image+placeholder\",\r\n largeImageURL: \"https://dummyimage.com/640x480/2a2a2a/ffffff&text=Image+placeholder\"\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","import React from \"react\";\r\nimport ImageGalleryItem from \"../ImageGalleryItem/ImageGalleryItem\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst ImageGallery = ({ modal, images }) => {\r\n console.log(\"RENDER ImageGallery\");\r\n return (\r\n  <ul className=\"ImageGallery\">\r\n   {images.map(el => (\r\n    <ImageGalleryItem\r\n     key={el.id}\r\n     webformatURL={el.webformatURL}\r\n     largeImageURL={el.largeImageURL}\r\n     modal={modal}\r\n    />\r\n   ))}\r\n   <div className=\"divForIntersectionObserver\"></div>\r\n  </ul>\r\n );\r\n};\r\n\r\nImageGallery.propTypes = {\r\n modal: PropTypes.func.isRequired,\r\n images: PropTypes.array.isRequired\r\n};\r\n\r\nexport default ImageGallery;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nclass Button extends React.Component {\r\n static propTypes = { fetchImgAPI: PropTypes.func.isRequired };\r\n\r\n handleClick = e => {\r\n  this.props.fetchImgAPI();\r\n };\r\n\r\n render() {\r\n  return (\r\n   <button onClick={this.handleClick} className={\"Button\"}>\r\n    Load more\r\n   </button>\r\n  );\r\n }\r\n}\r\n\r\nexport default Button;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nclass Modal extends React.Component {\r\n static propTypes = { closeModal: PropTypes.func.isRequired, large: PropTypes.string };\r\n\r\n componentDidMount() {\r\n  window.addEventListener(\"keydown\", this.closeCallback);\r\n }\r\n componentWillUnmount() {\r\n  window.removeEventListener(\"keydown\", this.closeCallback);\r\n }\r\n closeCallback = e => {\r\n  if (e.key === \"Escape\") {\r\n   this.props.closeModal();\r\n  }\r\n };\r\n\r\n render() {\r\n  return (\r\n   <div\r\n    onClick={e => {\r\n     e.target.nodeName !== \"IMG\" && this.props.closeModal();\r\n    }}\r\n    className=\"Overlay\"\r\n   >\r\n    <div className=\"Modal\">\r\n     <img src={this.props.large} alt=\"pic\" />\r\n    </div>\r\n   </div>\r\n  );\r\n }\r\n}\r\n\r\nexport default Modal;\r\n","import React from \"react\";\r\nimport Searchbar from \"./Searchbar/Searchbar\";\r\nimport FetchImages from \"./FetchImages/FetchImages\";\r\nimport ImageGallery from \"./ImageGallery/ImageGallery\";\r\nimport Button from \"./Button/Button\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport Modal from \"./Modal/Modal\";\r\n\r\nclass App extends React.Component {\r\n state = {\r\n  openModal: false,\r\n  loading: false,\r\n  error: false,\r\n  InfiniteScroll: true,\r\n  query: \"\",\r\n  images: [],\r\n  pageNumbear: 1,\r\n  pageAmount: 12,\r\n  largeImageForModal: undefined\r\n };\r\n\r\n getSnapshotBeforeUpdate(prevProps, prevState) {\r\n  return document.documentElement.scrollHeight - 160;\r\n }\r\n\r\n componentDidUpdate(prevProps, prevState, snapshot) {\r\n  //================IntersectionObserver===================================================\r\n  let specDiv = document.querySelector(\".divForIntersectionObserver\");\r\n  specDiv && this.state.InfiniteScroll && this.observer.observe(specDiv);\r\n  //=======================================================================================\r\n  if (prevState.query !== this.state.query) {\r\n   this.fetchImgAPI();\r\n  }\r\n\r\n  if (prevState.images.length !== this.state.images.length && prevState.images.length > 0) {\r\n   window.scrollTo({\r\n    top: snapshot,\r\n    behavior: \"smooth\"\r\n   });\r\n  }\r\n }\r\n\r\n //===================IntersectionObserver===================================================\r\n options = {\r\n  rootMargin: \"50px\",\r\n  threshold: 0.5\r\n };\r\n onEntry = (entries, observer) => {\r\n  entries.forEach(entry => {\r\n   entry.isIntersecting && this.fetchImgAPI();\r\n  });\r\n };\r\n observer = new IntersectionObserver(this.onEntry, this.options);\r\n\r\n onInfiniteScroll = value => this.setState({ InfiniteScroll: value });\r\n //===============================================================================\r\n\r\n fetchImgAPI = () => {\r\n  this.setState({ loading: true });\r\n  let { query, pageNumbear, pageAmount } = this.state;\r\n\r\n  FetchImages(query, pageNumbear, pageAmount)\r\n   .then(data => {\r\n    let arrImg = data.hits.map(el => ({\r\n     id: el.id,\r\n     webformatURL: el.webformatURL,\r\n     largeImageURL: el.largeImageURL\r\n    }));\r\n\r\n    this.setState(prevState => ({\r\n     images: [...prevState.images, ...arrImg],\r\n     pageNumbear: (prevState.pageNumbear += 1)\r\n    }));\r\n   })\r\n   .catch(error => this.setState({ error }))\r\n   .finally(() => this.setState({ loading: false }));\r\n };\r\n\r\n forSubmitSearchbar = value => {\r\n  if (this.state.query !== value) {\r\n   this.setState({ query: value, images: [], pageNumbear: 1 });\r\n  }\r\n };\r\n\r\n openModalToggle = largeImageURL => {\r\n  this.setState(() => ({ openModal: !this.state.openModal, largeImageForModal: largeImageURL }));\r\n };\r\n\r\n render() {\r\n  return (\r\n   <>\r\n    <Searchbar onInfiniteScroll={this.onInfiniteScroll} forSubmitSearchbar={this.forSubmitSearchbar} />\r\n    {this.state.images.length > 0 && <ImageGallery modal={this.openModalToggle} images={this.state.images} />}\r\n    {this.state.images.length > 0 && !this.state.loading && !this.state.InfiniteScroll && (\r\n     <Button fetchImgAPI={this.fetchImgAPI} />\r\n    )}\r\n    {this.state.loading && (\r\n     <Loader type=\"ThreeDots\" color=\"#3f51b5\" height={80} width={document.documentElement.clientWidth} />\r\n    )}\r\n    {this.state.error && <p>Error, try again later</p>}\r\n    {this.state.openModal && (\r\n     <Modal closeModal={this.openModalToggle} large={this.state.largeImageForModal} />\r\n    )}\r\n   </>\r\n  );\r\n }\r\n}\r\nexport default App;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\nimport styles from \"./styles.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}