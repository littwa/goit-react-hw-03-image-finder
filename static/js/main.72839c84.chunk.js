(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{12:function(e,a,t){e.exports={ImageGallery:"ImageGallery_ImageGallery__2JV1H"}},13:function(e,a,t){e.exports={Button:"Button_Button__auwu9"}},15:function(e,a,t){e.exports=t(42)},41:function(e,a,t){},42:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),o=t(11),c=t.n(o),l=t(9),m=t(2),i=t(3),s=t(5),u=t(4),g=t(6),h=t.n(g),p=function(e){Object(s.a)(t,e);var a=Object(u.a)(t);function t(){var e;Object(m.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).state={inputValue:"",agreed:!0},e.handleChange=function(a){a.persist(),e.setState({inputValue:a.target.value})},e.handleSubmit=function(a){a.preventDefault(),e.props.forSubmitSearchbar(e.state.inputValue)},e}return Object(i.a)(t,[{key:"render",value:function(){return n.a.createElement("header",{className:h.a.Searchbar},n.a.createElement("form",{onSubmit:this.handleSubmit,className:h.a.SearchForm},n.a.createElement("button",{type:"submit",className:h.a.SearchFormButton},n.a.createElement("span",{className:h.a.SearchFormButtonLabel},"Search")),n.a.createElement("input",{onChange:this.handleChange,value:this.state.inputValue,className:h.a.SearchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})))}}]),t}(n.a.Component),f=t(7),d=t.n(f),b=function(e){var a=e.webformatURL,t=e.largeImageURL,r=e.modal;return n.a.createElement("li",{onClick:function(){r(t)},className:d.a.ImageGalleryItem},n.a.createElement("img",{src:a,alt:"pic",className:d.a.ImageGalleryItemImage}))};b.defaultProps={webformatURL:"https://dummyimage.com/640x480/2a2a2a/ffffff&text=Image+placeholder",largeImageURL:"https://dummyimage.com/640x480/2a2a2a/ffffff&text=Image+placeholder"};var I=b,y=t(12),S=t.n(y),v=function(e){var a=e.modal,t=e.images;return console.log("RENDER ImageGallery"),n.a.createElement("ul",{className:S.a.ImageGallery},t.map((function(e){return n.a.createElement(I,{key:e.id,webformatURL:e.webformatURL,largeImageURL:e.largeImageURL,modal:a})})),n.a.createElement("div",{className:"divForIntersectionObserver"}))},_=t(13),E=t.n(_),O=function(e){Object(s.a)(t,e);var a=Object(u.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(i.a)(t,[{key:"render",value:function(){return n.a.createElement("button",{onClick:this.props.fetchImgAPI,className:E.a.Button},"Load more")}}]),t}(n.a.Component),N=t(8),M=function(e){Object(s.a)(t,e);var a=Object(u.a)(t);function t(){return Object(m.a)(this,t),a.apply(this,arguments)}return Object(i.a)(t,[{key:"componentDidMount",value:function(){document.querySelector('[tabindex="0"]').focus()}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{onClick:function(a){return"IMG"!==a.target.nodeName&&e.props.closeModal()},onKeyDown:function(a){return"Escape"===a.key&&e.props.closeModal()},className:N.Overlay,tabIndex:"0"},n.a.createElement("div",{className:N.ModalStyle},n.a.createElement("img",{src:this.props.large,alt:"pic"})))}}]),t}(n.a.Component),j=function(e,a,t){return fetch("https://pixabay.com/api/?key=16717692-bb141906bc5c82eed9886cf8d&q=".concat(e,"&page=").concat(a,"&image_type=photo&orientation=horizontal&per_page=").concat(t)).then((function(e){return e.json()}))},F=t(14),w=t.n(F),k=function(e){Object(s.a)(t,e);var a=Object(u.a)(t);function t(){var e;Object(m.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=a.call.apply(a,[this].concat(n))).state={openModal:!1,loading:!1,error:!1,noImages:!1,query:"",images:[],pageNumbear:1,pageAmount:12,largeImageForModal:void 0},e.fetchImgAPI=function(){e.setState({loading:!0});var a=e.state,t=a.query,r=a.pageNumbear,n=a.pageAmount;j(t,r,n).then((function(a){var t=a.hits.map((function(e){return{id:e.id,webformatURL:e.webformatURL,largeImageURL:e.largeImageURL}}));0===t.length&&e.setState({noImages:!0}),e.setState((function(e){return{images:[].concat(Object(l.a)(e.images),Object(l.a)(t)),pageNumbear:e.pageNumbear+=1}}))})).catch((function(a){return e.setState({error:a})})).finally((function(){return e.setState({loading:!1})}))},e.forSubmitSearchbar=function(a){e.state.query!==a&&e.setState({query:a,images:[],pageNumbear:1,noImages:!1})},e.openModalToggle=function(a){e.setState((function(){return{openModal:!e.state.openModal,largeImageForModal:a}}))},e}return Object(i.a)(t,[{key:"getSnapshotBeforeUpdate",value:function(e,a){return document.documentElement.scrollHeight-160}},{key:"componentDidUpdate",value:function(e,a,t){a.query!==this.state.query&&this.fetchImgAPI(),a.images.length!==this.state.images.length&&a.images.length>0&&window.scrollTo({top:t,behavior:"smooth"})}},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(p,{forSubmitSearchbar:this.forSubmitSearchbar}),this.state.images.length>0&&n.a.createElement(v,{modal:this.openModalToggle,images:this.state.images}),this.state.images.length>0&&!this.state.loading&&!this.state.noImages&&n.a.createElement(O,{fetchImgAPI:this.fetchImgAPI}),this.state.loading&&n.a.createElement(w.a,{type:"ThreeDots",color:"#3f51b5",height:80,width:document.documentElement.clientWidth}),this.state.error&&n.a.createElement("p",{className:"notif"},"Error, try again later"),this.state.noImages&&n.a.createElement("p",{className:"notif"}," No Images!!!"),this.state.openModal&&n.a.createElement(M,{closeModal:this.openModalToggle,large:this.state.largeImageForModal}))}}]),t}(n.a.Component);t(41);c.a.render(n.a.createElement(k,null),document.getElementById("root"))},6:function(e,a,t){e.exports={Searchbar:"Searchbar_Searchbar__QskXr",SearchForm:"Searchbar_SearchForm__7Q8rh",SearchFormButton:"Searchbar_SearchFormButton__3BhrQ",SearchFormButtonLabel:"Searchbar_SearchFormButtonLabel__Qbzmf",SearchFormInput:"Searchbar_SearchFormInput__NAOfO"}},7:function(e,a,t){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__2vyIx",ImageGalleryItemImage:"ImageGalleryItem_ImageGalleryItemImage__3m56M"}},8:function(e,a,t){e.exports={Overlay:"Modal_Overlay__2FrjI",ModalStyle:"Modal_ModalStyle__3R8GK"}}},[[15,1,2]]]);
//# sourceMappingURL=main.72839c84.chunk.js.map